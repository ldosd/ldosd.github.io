webpackJsonp([0],{1078:function(e,t,s){"use strict";var i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this,{key:"LoadScene"})||this}return i(t,e),t.prototype.preload=function(){this.load.image("background_title","assets/gfx/title_screen.png"),this.load.image("background_win","assets/gfx/win_screen.png"),this.load.image("background_gameover","assets/gfx/gameover_screen.png"),this.load.spritesheet("ui","assets/gfx/ui.png",{frameWidth:16,frameHeight:32}),this.load.image("knife","assets/gfx/knife.png"),this.load.image("cross","assets/gfx/cross.png"),this.load.image("blood","assets/gfx/blood.png"),this.load.image("tilemap01","assets/gfx/tilemap01.png"),this.load.image("background-tiles","assets/gfx/background-tiles.png"),this.load.tilemapTiledJSON("map1","assets/maps/map1.json"),this.load.tilemapTiledJSON("map2","assets/maps/map2.json"),this.load.tilemapTiledJSON("map3","assets/maps/map3.json"),this.load.tilemapTiledJSON("map4","assets/maps/map4.json"),this.load.tilemapTiledJSON("map5","assets/maps/map5.json"),this.load.tilemapTiledJSON("map6","assets/maps/map6.json"),this.load.tilemapTiledJSON("map7","assets/maps/map7.json"),this.load.tilemapTiledJSON("map8","assets/maps/map8.json"),this.load.atlas("soul_flares","assets/gfx/flares.png","assets/gfx/flares.json"),this.load.spritesheet("player","assets/gfx/player.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("priest","assets/gfx/priest2.png",{frameWidth:16,frameHeight:32}),this.load.spritesheet("popehat","assets/gfx/popehat.png",{frameWidth:16,frameHeight:32}),this.load.audio("titleaudio","assets/sfx/ambient_deep_bass.mp3",null),this.load.audio("gameoveraudio","assets/sfx/ambient_violin_scary.mp3",null),this.load.audio("winaudio","assets/sfx/ambient_deep_bass.mp3",null),this.load.audio("knife_hit","assets/sfx/knife_hit.mp3",null),this.load.audio("player_death","assets/sfx/player_death2.mp3",null),this.load.audio("player_fire_knife","assets/sfx/player_fire_knife.mp3",null),this.load.audio("player_hurt","assets/sfx/player_hurt.mp3",null),this.load.audio("player_jump","assets/sfx/player_jump2.mp3",null),this.load.audio("player_pickup","assets/sfx/player_pickup.mp3",null),this.load.audio("player_pickup_soul","assets/sfx/player_take_soul.mp3",null),this.load.audio("popehat_death","assets/sfx/popehat_death.mp3",null),this.load.audio("popehat_flying","assets/sfx/popehat_flying.mp3",null),this.load.audio("portal_activated","assets/sfx/portal_activated.mp3",null),this.load.audio("portal_use","assets/sfx/portal_use.mp3",null),this.load.audio("priest_death","assets/sfx/priest_death.mp3",null),this.load.audio("priest_fire","assets/sfx/priest_fire.mp3",null),this.load.audio("gameover_voice","assets/sfx/gameover.mp3",null),this.load.audio("player_laugh","assets/sfx/player_laugh.mp3",null),this.load.audio("priest_chant","assets/sfx/priest_chant.mp3",null),this.load.audio("win_voice","assets/sfx/win.mp3",null),this.load.audio("playing_audio","assets/sfx/ld43-mainout.mp3",null),this.load.audio("priestexplosion","assets/sfx/enemy_death.mp3",null)},t.prototype.create=function(){this.initAnims()},t.prototype.initAnims=function(){this.anims.create({key:"idle",frames:this.anims.generateFrameNumbers("player",{start:8,end:9}),frameRate:3,repeat:1}),this.anims.create({key:"run",frames:this.anims.generateFrameNumbers("player",{start:0,end:5}),frameRate:8,repeat:1}),this.anims.create({key:"turn",frames:this.anims.generateFrameNumbers("player",{frames:[6]}),frameRate:8,repeat:1}),this.anims.create({key:"jump",frames:this.anims.generateFrameNumbers("player",{frames:[7]}),frameRate:16,repeat:1}),this.anims.create({key:"jumpup",frames:this.anims.generateFrameNumbers("player",{frames:[0]}),frameRate:0,repeat:0}),this.anims.create({key:"jumpdown",frames:this.anims.generateFrameNumbers("player",{frames:[4]}),frameRate:0,repeat:0}),this.anims.create({key:"sacrefice",frames:this.anims.generateFrameNumbers("player",{frames:[0,10,11]}),frameRate:8,repeat:0}),this.anims.create({key:"dying",frames:this.anims.generateFrameNumbers("player",{frames:[14,15]}),frameRate:8,repeat:0}),this.anims.create({key:"switchmap",frames:this.anims.generateFrameNumbers("player",{frames:[12,13]}),frameRate:8,repeat:0}),this.anims.create({key:"flying",frames:this.anims.generateFrameNumbers("popehat",{start:0,end:7}),frameRate:10,repeat:-1}),this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("priest",{start:0,end:1}),frameRate:4,repeat:1}),this.anims.create({key:"crossfire",frames:this.anims.generateFrameNumbers("priest",{start:2,end:2}),frameRate:4,repeat:0}),this.anims.create({key:"sacreficepose",frames:this.anims.generateFrameNumbers("priest",{start:3,end:3}),frameRate:4,repeat:0}),this.anims.create({key:"sackofrobes",frames:this.anims.generateFrameNumbers("priest",{frames:[4]}),frameRate:0,repeat:0})},t.prototype.update=function(e,t){this.scene.start("GameScene")},t}(Phaser.Scene);t.default=n},1079:function(e,t,s){"use strict";var i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this,{key:"StartScene"})||this}return i(t,e),t.prototype.preload=function(){this.music=this.sound.add("titleaudio",{loop:!0})},t.prototype.create=function(){var e=this;this.add.image(0,0,"background_title").setOrigin(0,0),this.music.play("",0,1,!0),this.add.zone(450,200,568,63).setName("StartGame").setInteractive(),this.input.on("gameobjectdown",function(t,s){"StartGame"==s.name&&(document.getElementsByTagName("canvas")[0].style.cursor="default",e.music.stop(),e.scene.start("GameScene"))}),this.input.on("pointerover",function(e){document.getElementsByTagName("canvas")[0].style.cursor="crosshair"}),this.input.on("pointerout",function(e){document.getElementsByTagName("canvas")[0].style.cursor="default"})},t.prototype.update=function(e,t){},t}(Phaser.Scene);t.default=n},1080:function(e,t,s){"use strict";var i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(s(1081)),a=n(s(1082)),o=n(s(1083)),p=n(s(1086)),c=function(e){function t(){var t=e.call(this,{key:"GameScene"})||this;return t.map=new a.default({scene:t,yOffset:80}),t.enemyHandler=new o.default(t),t.uiHandler=new p.default(t),t}return i(t,e),t.prototype.preload=function(){this.music=this.sound.add("playing_audio",{loop:!0,volume:.4})},t.prototype.create=function(){this.crossParticles=this.add.particles("cross"),this.crossParticles.setDepth(22),this.enemyHandler.create(),this.uiHandler.create(),this.initPlayer(),this.map.currentMap=1,this.map.create(),this.initPhysics(),this.music.volume=.1,this.music.play("",0,1,!0)},t.prototype.update=function(e,t){this.player.update(e,t),this.enemyHandler.update(e,t)},t.prototype.initPlayer=function(){var e=this.input.keyboard.createCursorKeys();e.up.isDown=!1,e.down.isDown=!1,e.right.isDown=!1,e.left.isDown=!1,this.player=new r.default(100,100,this,e)},t.prototype.initPhysics=function(){this.map.init()},t}(Phaser.Scene);t.default=c},1081:function(e,t,s){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(s(434)),r=function(){function e(e,t,s,i){var r=this;this.scene=s,this.cursors=i,this.switchMap=!1,this._=this,this.space=this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.turnedRight=!0,this.doublejump=!0,this.jumpTimer=0,this.hp=5,this.dying=!1,this.sacreficeTimer=0,this.animTimers={turn:0,jump:0},this.haveFired=!1,this.sceneLcl=s,this.sprite=this.scene.physics.add.sprite(e,t,"player"),this.sprite.body.offset.x=9,this.sprite.body.setSize(14,32),this.sprite.setScale(2),this.sprite.setDepth(6),this.knifeManager=new n.default(this.scene,"knife",5,!0,500,{x:12,y:12,width:10,height:6},this.onFire,this),this.pew=this.sceneLcl.sound.add("player_fire_knife",{loop:!1}),this.pew.volume=.4,this.jumpsound=this.sceneLcl.sound.add("player_jump",{loop:!1,volume:.3}),this.jumpsound.volume=.3,this.hurtsound=this.sceneLcl.sound.add("player_hurt",{loop:!1,volume:.8}),this.diesound=this.sceneLcl.sound.add("player_death",{loop:!1,volume:.8}),this.sprite.on("animationcomplete",function(e){"jump"===e.key&&(r.sprite.body.setVelocityY(-330),r.jumpTimer=330,r.doublejump=!0,r.jumpsound.play())},s)}return e.prototype.update=function(e,t){this.sceneLcl.physics.world.wrap(this.sprite,8,30),this.knifeManager.update(t),this.sacreficeTimer-=t,this.jumpTimer>0&&(this.jumpTimer-=t),this.sacreficeTimer<=0&&!this.dying&&!this.switchMap?this.checkMovements(t):this.sprite.body.setVelocityX(0)},e.prototype.checkMovements=function(e){this.cursors.left.isDown?(!1===this.sprite.flipX&&this.animTimers.turn<=0&&this.animTimers.jump<=0&&(this.sprite.anims.play("turn",!0),this.animTimers.turn=120),this.sprite.body.setVelocityX(-160),this.turnedRight=!1,this.sprite.flipX=!0):this.cursors.right.isDown?(!0===this.sprite.flipX&&this.animTimers.turn<=0&&this.animTimers.jump<=0&&(this.sprite.anims.play("turn",!0),this.animTimers.turn=120),this.sprite.body.setVelocityX(160),this.turnedRight=!0,this.sprite.flipX=!1):this.sprite.body.setVelocityX(0),this.cursors.up.isDown&&this.sprite.body.onFloor()&&(this.sprite.anims.play("jump",!0),this.animTimers.jump=100),this.cursors.up.isDown&&this.jumpTimer<=0&&!0===this.doublejump&&this.animTimers.jump<=0&&(this.sprite.body.setVelocityY(-330),this.doublejump=!1,this.jumpsound.play()),this.space.isDown&&!this.haveFired?(this.haveFired=!0,this.turnedRight?this.knifeManager.fire(this.sprite.x+10,this.sprite.y-6,this.turnedRight):this.knifeManager.fire(this.sprite.x-10,this.sprite.y-6,this.turnedRight)):this.space.isDown||(this.haveFired=!1),Math.abs(this.sprite.body.velocity.x)>0&&this.animTimers.turn<=0&&this.animTimers.jump<=0?this.sprite.anims.play("run",!0):this.animTimers.turn<=0&&this.animTimers.jump<=0&&this.sprite.anims.play("idle",!0),this.animTimers.turn-=e,this.animTimers.jump-=e,this.sprite.body.velocity.y<0&&this.animTimers.jump<=0?this.sprite.anims.play("jumpup",!0):this.sprite.body.velocity.y>0&&this.animTimers.jump<=0&&this.sprite.anims.play("jumpdown",!0)},e.prototype.stopKnife=function(e,t){e.setVelocityX(0),e.setVelocityY(0),e.setAccelerationY(600)},e.prototype.sacrefice=function(e,t){if(e.scene.player.sacreficeTimer<=0&&!t.sacreficed){e.anims.play("sacrefice"),e.scene.sound.add("knife_hit",{loop:!1,volume:.4}).play();var s=void 0,i=void 0;s=t.flipX?s={min:t.x-2,max:t.x-4}:{min:t.x+2,max:t.x+4},i=t.y+4;var n=t.scene.add.particles("blood");n.setDepth(20);n.createEmitter({x:s,y:{min:i,max:i+2},scale:{start:2,end:2},angle:{min:265,max:275},speed:50,gravityY:200,lifespan:{min:500,max:800}});e.scene.player.sacreficeTimer=500,t.sacreficed=!0,e.scene.enemyHandler.addSacreficeTimer({timer:2e3,manager:n,sacrefice:t})}},e.prototype.takeDamage=function(){this.hp--,this.died()},e.prototype.switchMapFunc=function(){this.switchMap=!0,this.sprite.anims.play("switchmap")},e.prototype.died=function(){this.dying||(this.dying=!0,this.diesound.play(),this.sprite.anims.play("dying"),this.scene.time.delayedCall(2e3,function(){for(var e=0,t=this.scene.enemyHandler.enemys;e<t.length;e++){var s=t[e];s.flyingsound&&s.flyingsound.stop()}this.scene.uiHandler.decreaseHearts()?(this.scene.music.stop(),this.scene.scene.start("GameOverScene")):this.scene.map.replay()},[],this))},e.prototype.onFire=function(e){e.pew.play(),e.updateDaggers()},e.prototype.updateDaggers=function(){this.scene.uiHandler.setDaggers(this.knifeManager.getBulletsLeft())},e.prototype.resetDaggers=function(){this.knifeManager.clear(),this.updateDaggers()},e}();t.default=r},1082:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=e.scene,s=e.yOffset;this.currentMap=1,this.maxMap=8,this.layerYOffset=0,this.colliders=[],this.spawnpoint={x:100,y:100},this.sceneRef=t,this.layerYOffset=s}return e.prototype.create=function(){var e=this;console.log("create map"),this.map=this.sceneRef.make.tilemap({key:"map"+this.currentMap}),this.tiles=this.map.addTilesetImage("tilemap01","tilemap01"),this.bgtiles=this.map.addTilesetImage("background-tiles","background-tiles"),this.deadlyGroup=this.sceneRef.physics.add.staticGroup(),this.backgroundLayer=this.map.createDynamicLayer("Background",this.bgtiles).setScale(2),this.backgroundLayer.setDepth(0),this.tileLayer=this.map.createDynamicLayer("Tiles",this.tiles).setScale(2),this.sceneRef.physics.world.bounds.width=2*this.tileLayer.width,this.sceneRef.physics.world.bounds.height=2*this.tileLayer.height,this.sceneRef.enemyHandler.removeAll(),this.findObjectsByType("Priest",0).forEach(function(t){e.sceneRef.enemyHandler.add(2*t.x,2*t.y,0)}),this.findObjectsByType("PopeHat",0).forEach(function(t){e.sceneRef.enemyHandler.add(2*t.x,2*t.y,1)}),this.tileLayer.forEachTile(function(t){if(66===t.index){var s=32*t.x,i=32*t.y,n=e.sceneRef.add.zone(s+12,i-2,10,10);e.deadlyGroup.add(n)}}),this.tileLayer.setCollisionByExclusion([-1])},e.prototype.init=function(){var e=this;console.log("init map"),this.colliders.push(this.sceneRef.physics.add.collider(this.tileLayer,this.sceneRef.player.sprite,null,null,null)),this.colliders.push(this.sceneRef.physics.add.collider(this.tileLayer,this.sceneRef.player.knifeManager.bullets,this.sceneRef.player.stopKnife,null)),this.colliders.push(this.sceneRef.physics.add.collider(this.deadlyGroup,this.sceneRef.player.sprite,this.playerDeadlyCollide.bind(this),null,null)),this.colliders.push(this.sceneRef.physics.add.collider(this.tileLayer,this.sceneRef.enemyHandler.enemyCollideLevelGroup,null,null)),this.colliders.push(this.sceneRef.physics.add.collider(this.tileLayer,this.sceneRef.enemyHandler.sacreficeGroup,null,null)),this.colliders.push(this.sceneRef.physics.add.collider(this.sceneRef.enemyHandler.enemyGroup,this.sceneRef.player.knifeManager.bullets,this.sceneRef.enemyHandler.onHit,null)),this.colliders.push(this.sceneRef.physics.add.collider(this.sceneRef.enemyHandler.enemyCollidePlayerGroup,this.sceneRef.player.sprite,this.playerDeadlyCollide.bind(this),null,null)),this.colliders.push(this.sceneRef.physics.add.collider(this.sceneRef.player.knifeManager.bullets,this.sceneRef.player.sprite,function(t,s){s.destroy(),e.sceneRef.player.updateDaggers()},null)),this.colliders.push(this.sceneRef.physics.add.overlap(this.sceneRef.player.sprite,this.sceneRef.enemyHandler.sacreficeGroup,this.sceneRef.player.sacrefice,null));for(var t=0,s=this.sceneRef.enemyHandler.enemys;t<s.length;t++){var i=s[t];i.fireManager&&(this.sceneRef.physics.add.collider(this.tileLayer,i.fireManager.bullets,function(e,t){e.destroy()},null),this.sceneRef.physics.add.collider(this.sceneRef.player.sprite,i.fireManager.bullets,function(e,t){t.destroy(),e.scene.player.takeDamage()},null))}this.sceneRef.uiHandler.init(this.findObjectsByType("Priest",0).length),this.sceneRef.player.resetDaggers(),this.reload()},e.prototype.collideAtPoint=function(e,t){var s=this.map.getTileAt(Math.floor(e/32),Math.floor(t/32),1);return!s||s.index>-1},e.prototype.reload=function(){var e=this.findObjectsByType("SpawnPoint",0)[0];this.spawnpoint.x=2*e.x,this.spawnpoint.y=2*e.y,console.log("setting player to spawnpoint: ",this.spawnpoint),this.sceneRef.player.sprite.setX(this.spawnpoint.x),this.sceneRef.player.sprite.setY(this.spawnpoint.y),this.sceneRef.player.dying=!1},e.prototype.replay=function(){this.currentMap--,this.nextMap()},e.prototype.nextMap=function(){if(++this.currentMap>this.maxMap)return this.currentMap=1,void this.sceneRef.scene.start("WinScene");for(var e=0,t=this.sceneRef.enemyHandler.enemys;e<t.length;e++){var s=t[e];s.flyingsound&&s.flyingsound.stop(),s.emitter&&(s.emitter.on=!1)}for(;this.sceneRef.enemyHandler.sacreficeGroup.children.size>0;)this.sceneRef.enemyHandler.sacreficeGroup.children.get(0).destroy();for(this.create(),this.removeColliders();this.sceneRef.enemyHandler.robes.length>0;)this.sceneRef.enemyHandler.robes[0].destroy(),this.sceneRef.enemyHandler.robes.splice(0,1);this.sceneRef.player.knifeManager.clear(!0),this.init()},e.prototype.playerDeadlyCollide=function(e,t){e.body.setVelocityX(0),e.body.setVelocityY(0),this.sceneRef.player.takeDamage()},e.prototype.findObjectsByType=function(e,t){var s=new Array;return this.map.objects[t]?(this.map.objects[t].objects.forEach(function(t){t.type===e&&s.push(t)}),s):s},e.prototype.removeColliders=function(){for(var e=0,t=this.colliders;e<t.length;e++){var s=t[e];this.sceneRef.physics.world.removeCollider(s)}},e}();t.default=i},1083:function(e,t,s){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(s(1084)),r=i(s(1085)),a=function(){function e(e){this.scene=e,this.enemys=[],this.sacrefices=[],this.robes=[],this.sceneRef=e}return e.prototype.create=function(){this.sacreficeGroup=this.scene.physics.add.group(),this.enemyGroup=this.scene.physics.add.group(),this.enemyCollideLevelGroup=this.scene.physics.add.group(),this.enemyCollidePlayerGroup=this.scene.physics.add.group()},e.prototype.update=function(e,t){this.sceneRef.physics.world.wrap(this.enemys,0);for(var s=0,i=this.enemys;s<i.length;s++){i[s].update(e,t)}for(var n=[],r=this,a=0,o=this.sacrefices;a<o.length;a++){var p=o[a];!function(e){if(e.timer-=t,e.timer<=0){var s=r.scene.add.particles("blood");s.setDepth(20),r.scene.sound.add("priestexplosion",{loop:!1,volume:.4}).play();var i=s.createEmitter({x:{min:e.sacrefice.x-10,max:e.sacrefice.x+10},y:{min:e.sacrefice.y-15,max:e.sacrefice.y+25},quantity:50,scale:{start:3,end:1},angle:{min:240,max:300},speed:150,gravityY:200,lifespan:{min:1e3,max:1200}});r.scene.time.delayedCall(500,function(){i.on=!1,this.scene.time.delayedCall(1e3,function(){s.destroy()},[],this)},[],r),e.sacrefice.anims.play("sackofrobes"),r.robes.push(e.sacrefice),e.manager.destroy(),n.push(e),r.sceneRef.uiHandler.increaseSouls()&&(r.sceneRef.player.switchMapFunc(),r.scene.time.delayedCall(1500,function(){for(var e=0,t=this.scene.enemyHandler.enemys;e<t.length;e++){var s=t[e];s.flyingsound&&s.flyingsound.stop(),s.emitter&&(s.emitter.on=!1)}this.sceneRef.player.switchMap=!1,this.sceneRef.map.nextMap()},[],r))}}(p)}for(var c=0,h=n;c<h.length;c++){var l=h[c],u=this.sacrefices.indexOf(l);-1!=u&&this.sacrefices.splice(u,1)}},e.prototype.addSacrefice=function(e,t,s){var i=this.scene.physics.add.sprite(e,t,"priest");i.setScale(2),i.setDepth(5),i.flipX=s,i.anims.play("sacreficepose",!0),this.sacreficeGroup.add(i)},e.prototype.addSacreficeTimer=function(e){this.sacrefices.push(e)},e.prototype.add=function(e,t,s){var i;switch(s){case 0:i=new r.default(e,t,this.scene),this.enemyCollideLevelGroup.add(i.sprite);break;case 1:i=new n.default(e,t,this.scene),this.enemyCollidePlayerGroup.add(i.sprite);break;default:console.log("NO ENEMY WITH TYPE ",s)}this.enemyGroup.add(i.sprite),this.enemys.push(i)},e.prototype.remove=function(e){this.enemys.splice(this.enemys.indexOf(e),1)},e.prototype.removeAll=function(){this.enemys.forEach(function(e){e.sprite.destroy()}),this.sacreficeGroup.clear(),this.enemys=[]},e.prototype.onTurn=function(e,t){for(var s,i=0,n=e.scene.enemyHandler.enemys;i<n.length;i++){var r=n[i];r.collider===e&&(s=r)}s.checkTurn&&s.checkTurn()},e.prototype.onHit=function(e,t){for(var s,i=0,n=e.scene.enemyHandler.enemys;i<n.length;i++){var r=n[i];r.sprite===e&&(s=r)}s.takeDamage(),t.setAccelerationY(600)},e}();t.default=a},1084:function(e,t,s){"use strict";var i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(s(435)),a=function(e){function t(t,s,i){var n=e.call(this,t,s,"popehat",i)||this;return n.sprite.anims.play("flying",!0),n.sprite.body.setAllowGravity(!1),n.sprite.setSize(12,20),n.sprite.setOffset(2,6),n.flyingsound=n.scene.sound.add("popehat_flying",{loop:!0,volume:.2}),n.flyingsound.play("",0,1,!0),n.emitter=n.scene.crossParticles.createEmitter({speed:{min:30,max:50},scale:{start:1,end:0},lifespan:{min:1e3,max:2e3},quantity:1,frequency:100,follow:n.sprite}),n.emitter.startFollow(n.sprite),n}return i(t,e),t.prototype.update=function(e,t){this.scene.physics.moveToObject(this.sprite,this.scene.player.sprite.body.center,48)},t.prototype.onDeath=function(){this.sprite.destroy();var e=this.scene.enemyHandler.enemys.indexOf(this);-1!=e&&this.scene.enemyHandler.enemys.splice(e,1),this.flyingsound.stop(),this.scene.sound.add("popehat_death",{loop:!1,volume:.1}).play();var t=this.scene.crossParticles.createEmitter({x:{min:this.sprite.x-10,max:this.sprite.x+10},y:{min:this.sprite.y-15,max:this.sprite.y+25},quantity:1,scale:{start:1,end:0},angle:{min:0,max:360},speed:100,gravityY:100,lifespan:{min:1e3,max:1200}});this.scene.time.delayedCall(500,function(){t.on=!1,this.emitter.on=!1},[],this),this.scene.time},t}(r.default);t.default=a},1085:function(e,t,s){"use strict";var i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(s(435)),a=n(s(434)),o=function(e){function t(t,s,i){var n=e.call(this,t,s,"priest",i)||this;return n.turnRight=0!=Math.round(Math.random()),n.doTurn=!1,n.turnCd=100,n.fireCd=1500,n.fireing=0,n.paralyzed=!1,n.fireManager=new a.default(n.scene,"cross",5,!1,3e3,{x:12,y:12,width:10,height:6},n.onFire,n),n.pew=n.scene.sound.add("priest_fire",{loop:!1,volume:.4}),n.pew.volume=.4,n.deathsound=n.scene.sound.add("priest_death",{loop:!1,volume:.6}),n}return i(t,e),t.prototype.update=function(e,t){this.fireing-=t,this.turnCd-=t;var s,i;this.doTurn&&this.turnCd<=0&&(this.turnRight=!this.turnRight,this.turnCd=100),this.fireing<0?(this.turnRight?(this.sprite.anims.play("walk",!0),this.sprite.body.setVelocityX(50),s=[this.sprite.x+15,this.sprite.y+32],i=[this.sprite.x+18,this.sprite.y],this.sprite.flipX=!0):(this.sprite.anims.play("walk",!0),this.sprite.body.setVelocityX(-50),s=[this.sprite.x-15,this.sprite.y+32],i=[this.sprite.x-18,this.sprite.y],this.sprite.flipX=!1),!this.scene.map.collideAtPoint(s[0],s[1])||this.scene.map.collideAtPoint(i[0],i[1])?this.doTurn=!0:this.doTurn=!1):this.sprite.body.setVelocityX(0),this.fireManager.update(t),this.fireManager.fire(this.sprite.x+10,this.sprite.y-6,this.turnRight)<300&&(this.fireing=600,this.sprite.anims.play("crossfire",!0))},t.prototype.onDeath=function(){this.scene.enemyHandler.addSacrefice(this.sprite.x,this.sprite.y,this.turnRight),this.deathsound.play(),this.sprite.destroy(),this.scene.enemyHandler.remove(this)},t.prototype.onFire=function(e){e.pew.play()},t}(r.default);t.default=o},1086:function(e,t,s){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(s(1087)),r=function(){function e(e){this.scene=e,this.numSoulsToGet=7,this.currentSouls=0,this.currentHearts=3,this.numBulletsPlayerHas=5,this.numHealth=3,this.UI_TYPES={HEART:0,SKULL:1,GRAYSKULL:2,DAGGER:3},this.sceneRef=e}return e.prototype.create=function(){this.uiHudGroup=this.scene.physics.add.staticGroup(),this.currentHearts=3,this.init()},e.prototype.init=function(e){this.currentSouls=0,this.numSoulsToGet=e||Math.max(Math.floor(1.5*this.sceneRef.map.currentMap),3)},e.prototype.refreshUI=function(){this.uiHudGroup.clear(!0);for(var e=0;e<this.numBulletsPlayerHas;e++){var t=new n.default(30*e+40,680,this.UI_TYPES.DAGGER,this.scene);this.uiHudGroup.add(t.sprite)}for(var e=0;e<this.numSoulsToGet;e++){var s=void 0;s=e<this.currentSouls?new n.default(40*e+300,680,this.UI_TYPES.SKULL,this.scene):new n.default(40*e+300,680,this.UI_TYPES.GRAYSKULL,this.scene),this.uiHudGroup.add(s.sprite)}for(var e=0;e<this.currentHearts;e++){var i=new n.default(30*e+845,680,this.UI_TYPES.HEART,this.scene);this.uiHudGroup.add(i.sprite)}},e.prototype.update=function(e,t){},e.prototype.setDaggers=function(e){this.numBulletsPlayerHas=e,this.refreshUI()},e.prototype.decreaseHearts=function(){return this.currentHearts--,this.refreshUI(),this.currentHearts<=0},e.prototype.increaseSouls=function(){return this.currentSouls++,this.refreshUI(),this.currentSouls>=this.numSoulsToGet},e}();t.default=r},1087:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,s,i){this.x=e,this.y=t,this.scene=i,this.sprite=this.scene.add.sprite(e,t,"ui",s),this.sprite.setScale(2),this.sprite.setDepth(5)}return e}();t.UiGadget=i,t.default=i},1088:function(e,t,s){"use strict";var i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this,{key:"GameOverScene"})||this}return i(t,e),t.prototype.preload=function(){this.music=this.sound.add("gameoveraudio",{loop:!1}),this.gameoveraudio=this.sound.add("gameover_voice",{loop:!1})},t.prototype.create=function(){var e=this;this.add.image(0,0,"background_gameover").setOrigin(0,0),this.gameoveraudio.on("ended",function(e){this.music.play("",0,1,!0)},this),this.gameoveraudio.play("",0,1,!0),this.add.zone(0,0,960,720).setName("StartGame").setInteractive(),this.space=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.space.isDown=!1,this.input.on("gameobjectdown",function(t,s){"StartGame"==s.name&&(document.getElementsByTagName("canvas")[0].style.cursor="default",e.music.stop(),e.scene.start("GameScene"))}),this.input.on("pointerover",function(e){document.getElementsByTagName("canvas")[0].style.cursor="crosshair"}),this.input.on("pointerout",function(e){document.getElementsByTagName("canvas")[0].style.cursor="default"})},t.prototype.playMusic=function(e){this.music.play("",0,1,!0)},t.prototype.update=function(e,t){this.space.isDown&&(this.music.stop(),this.gameoveraudio.stop(),this.scene.start("GameScene"))},t}(Phaser.Scene);t.default=n},1089:function(e,t,s){"use strict";var i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this,{key:"WinScene"})||this}return i(t,e),t.prototype.preload=function(){this.music=this.sound.add("winaudio",{loop:!0}),this.winaudio=this.sound.add("win_voice",{loop:!1})},t.prototype.create=function(){var e=this;this.add.image(0,0,"background_win").setOrigin(0,0),this.winaudio.on("ended",function(e){this.music.play("",0,1,!0)},this),this.winaudio.play("",0,1,!0),this.add.zone(0,0,960,720).setName("StartGame").setInteractive(),this.space=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.input.on("gameobjectdown",function(t,s){"StartGame"==s.name&&(document.getElementsByTagName("canvas")[0].style.cursor="default",e.music.stop(),e.scene.start("GameScene"))}),this.input.on("pointerover",function(e){document.getElementsByTagName("canvas")[0].style.cursor="crosshair"}),this.input.on("pointerout",function(e){document.getElementsByTagName("canvas")[0].style.cursor="default"})},t.prototype.update=function(e,t){this.space.isDown&&(this.music.stop(),this.winaudio.stop(),this.scene.start("GameScene"))},t}(Phaser.Scene);t.default=n},434:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,s,i,n,r,a,o){this.scene=e,this.texture=t,this.angle=i,this.onFire=a,this.context=o,this.cd=100,this.firecd=0,this.bullets=e.physics.add.group({maxSize:s,runChildUpdate:!0}),n&&(this.cd=n,this.firecd=Math.floor(Math.random()*n)),r&&(this.collisionbox=r),this.sceneRef=e}return e.prototype.clear=function(){for(;this.bullets.children.entries.length>0;)this.bullets.children.entries[0].destroy()},e.prototype.update=function(e){this.sceneRef.physics.world.wrap(this.bullets,0),this.firecd>0&&(this.firecd-=e)},e.prototype.fire=function(e,t,s){if(this.firecd<=0){var i=this.bullets.get();i&&(i.x=e,i.y=t,i.setTexture(this.texture),i.body.setAllowGravity(!1),i.setScale(2),i.setDepth(10),i.setBounceX(0),i.setBounceY(0),s?(i.setVelocityX(400),this.angle&&(i.angle=90)):(i.setVelocityX(-400),this.angle&&(i.angle=270)),this.collisionbox&&(i.setSize(this.collisionbox.width,this.collisionbox.height,!0),i.setOffset(this.collisionbox.x,this.collisionbox.y)),this.onFire&&this.onFire(this.context),this.firecd=this.cd)}return this.firecd},e.prototype.getBulletsLeft=function(){return this.bullets.maxSize-this.bullets.children.entries.length},e}();t.default=i},435:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,s,i){this.x=e,this.y=t,this.scene=i,this.hp=1,this.sprite=this.scene.physics.add.sprite(e,t,s),this.sprite.setScale(2),this.sprite.setDepth(5)}return e.prototype.takeDamage=function(){--this.hp<=0&&this.onDeath()},e}();t.default=i},436:function(e,t,s){e.exports=s(437)},437:function(e,t,s){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(210);var n=i(s(1078)),r=i(s(1079)),a=i(s(1080)),o=i(s(1088)),p=i(s(1089)),c={type:Phaser.AUTO,parent:"content",width:960,height:720,resolution:1,pixelArt:!0,backgroundColor:"#2a1133",physics:{default:"arcade",arcade:{gravity:{y:700},debug:!1}},scene:[n.default,r.default,a.default,o.default,p.default]};new Phaser.Game(c)}},[436]);